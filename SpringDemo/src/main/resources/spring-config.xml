<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	
	xmlns:aop="http://www.springframework.org/schema/aop"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
	http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd">
	<!-- 基于配置文件 -->

	<bean id="userService" class="com.qingyezhu.spring.config.service.impl.UserServiceImpl"/>
	
	<bean id="user" class="com.qingyezhu.spring.config.model.User">
		<property name="id" value="1"/>
		<property name="nick" value="qingyezhu"/>
		<property name="comments">
			<list>
				<value>A little spark kindles a great fire. 星星之火，可以燎原。</value>
				<value>Money is the root of all evil. 金钱是万恶之源。 </value>
				<value>Never judge by appearances. 人不可貌相。</value>
				<value>No great loss without some small gain. 塞翁失马，安知非福。 </value>
				<value>Nothing venture, nothing win (or have or gain). 不入虎穴，焉得虎子。 </value>
			</list>
		</property>
	</bean>
	
	<bean id="parentUser" class="com.qingyezhu.spring.config.model.User" abstract="true">
		<property name="id" value="0"/>
		<property name="nick" value="hello"/>
		<property name="comments">
			<list>
				<value>A little spark kindles a great fire. 星星之火，可以燎原。</value>
				<value>Money is the root of all evil. 金钱是万恶之源。 </value>
				<value>Never judge by appearances. 人不可貌相。</value>
				<value>No great loss without some small gain. 塞翁失马，安知非福。 </value>
				<value>Nothing venture, nothing win (or have or gain). 不入虎穴，焉得虎子。 </value>
			</list>
		</property>
	</bean>
	
	<bean id="_user1" parent="parentUser">
		<property name="id" value="1"/>
		<property name="nick" value="lili"/>
	</bean>
	
	<bean id="_user2" parent="parentUser">
		<property name="id" value="2"/>
		<property name="nick" value="hanmei"/>
	</bean>	
	
	<!-- aop start -->
	<bean id="userAspect" class="com.qingyezhu.spring.config.aop.UserAspect"/>
	<!-- aop配置 -->
	<aop:config proxy-target-class="true">
		<!-- 默认使用JDK的动态代理，此时使用的是CGLib机制 -->
		<!-- 切入点：拦截的方法 -->
		<aop:pointcut expression="execution(* com.qingyezhu.spring.config.service.impl.UserServiceImpl.*(..))" id="userPt"/>
			
		<!-- 切面 -->
		<aop:aspect ref="userAspect">
			<!-- 环绕通知 -->
			<aop:around method="doAround" pointcut-ref="userPt"/>
			<!-- 前置 -->
			<aop:before method="doBefore" pointcut-ref="userPt"/>
			<!-- 后置（包括异常和返回） -->
			<aop:after method="doAfter" pointcut-ref="userPt"/>
			<!-- 异常 -->
			<aop:after-throwing method="doThrowing" throwing="ex" pointcut-ref="userPt"/>
			<!-- 返回 -->
			<aop:after-returning method="doReturning" pointcut-ref="userPt"/>
		</aop:aspect>
	</aop:config>
	
</beans>